// index.js
const { Client, LocalAuth } = require('whatsapp-web.js');
const qrcode = require('qrcode-terminal');

// Initialisation du bot avec authentification locale
const client = new Client({
    authStrategy: new LocalAuth()
});

// Affiche un QR Code dans le terminal pour lier ton WhatsApp
client.on('qr', qr => {
    qrcode.generate(qr, {small: true});
});

// Quand le bot est prÃªt
client.on('ready', () => {
    console.log('âœ… Bot WhatsApp connectÃ© et prÃªt !');
});

// Commande : !tagall
client.on('message', async msg => {
    if (msg.body.toLowerCase() === '!tagall') {
        const chat = await msg.getChat();

        if (chat.isGroup) {
            let text = 'ðŸ‘¥ @all\n\n';
            let mentions = [];

            for (let participant of chat.participants) {
                const contact = await client.getContactById(participant.id._serialized);
                mentions.push(contact);
                text += `@${participant.id.user} `;
            }

            await chat.sendMessage(text, { <!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Junior</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: linear-gradient(to right, #2196F3, #21CBF3);
      color: white;
      margin: 0;
      padding: 0;
    }
    header {
      padding: 50px 20px;
    }
    h1 {
      font-size: 3em;
      margin: 0;
    }
    p {
      font-size: 1.2em;
    }
    main {
      background: white;
      color: black;
      padding: 40px 20px;
      border-radius: 10px;
      margin: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    a.whatsapp-btn {
      display: inline-block;
      background-color: #25D366;
      color: white;
      font-size: 18px;
      font-weight: bold;
      padding: 12px 25px;
      border-radius: 8px;
      text-decoration: none;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      margin-top: 20px;
    }
    a.whatsapp-btn:hover {
      background-color: #1ebe5d;
    }
  </style>
</head>
<body>
  <header>
    <h1>Bienvenue sur le site de Junior</h1>
    <p>CrÃ©Ã© avec GitHub Pages ðŸš€</p>
  </header>

  <main>
    <p>Ceci est ma premiÃ¨re page hÃ©bergÃ©e sur GitHub Pages ! ðŸŽ‰</p>
    <p>Je vais continuer Ã  lâ€™amÃ©liorer petit Ã  petit.</p>

    <!-- âœ… Bouton WhatsApp -->
    <a href="https://wa.me/22932498825" target="_blank" class="whatsapp-btn">
      ðŸ’¬ Discuter sur WhatsApp
    </a>
  </main>
</body>
</html>
